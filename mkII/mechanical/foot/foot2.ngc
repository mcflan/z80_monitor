; Cut radius at bottom of foot with ball-nose cutter

o101 sub
    ( Mill a rectangle with sharp corners, anti-clockwise. Use with cutter comp. )
    ( Starts bottom left of rectangle, so ensure there is a clear path in.   )
    ( usage:                                                                )
    (   o100 call [x centre] [y centre] [x width] [ y width] [r_cutter]     )
#3=[#3/2]
#4=[#4/2]
g1 x[#1 - #3 - #5] y[#2 - #4]   (feed to cutter_r left of bottom left corner)
g1 x[#1 + #3]                   (cut bottom)
g1 y[#2 + #4]                   (cut RHS)
g1 x[#1 - #3]                   (cut top)
g1 y[#2 - #4]                   (cut LHS)
g1 x[#1 - #3 + #5/2]              (cut short distance along bottom to clear corner with cutter comp) 
g1 x[#1 - #3 + #5*2] y[#2 - #4 - #5/2]  (move off) 
o101 endsub

; *****************************************************************************
;   Main Code
; *****************************************************************************

; Preamble
G80 ; Cancel any canned cycle
G17 ; XY plane
G54 ; Coordinate System 1
G90 ; Absolute
G21 ; Millimetres
G40 ; Cancel cutter radius comp
G49 ; Cancel tool length comp

#<safe_Z> = 60
#<safe_Z_uncomp> = 100

T2 M6 (Load 6mm ball-nose tool)
g43 (tool length offet on)
g0 z[#<safe_Z>] (safe Z)
g0 x-70 y-30 (home bottom left)

(roughing)
f100
g0 z14
g42 (compensation on)
o101 call [0] [0] [34.4] [10.4] [3]
g0 z[#<safe_Z>] (safe Z)
g40 (compensation off)
g0 x-70 y-30 (home bottom left)

(finishing)
f200
g0 z14
g42 (compensation on)
o101 call [0] [0] [34.0] [10.0] [3]
g0 z[#<safe_Z>] (safe Z)
g40 (compensation off)
g0 x-70 y-30 (home bottom left)

g0 x-150 (move clear  of workpiece)

g49 (length compensation off)
g0 z[#<safe_Z_uncomp>]

m2
