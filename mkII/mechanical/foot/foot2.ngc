; Cut radius at bottom of foot with ball-nose cutter

o101 sub
    ( Mill a rectangle with sharp corners, anti-clockwise with manual cutter comp. )
    ( Starts bottom left of rectange, so ensure there is a clear path in.   )
    ( usage:                                                                )
    (   o100 call [x centre] [y centre] [x width] [ y width] [r_cutter]     )
#3=[#3/2]
#4=[#4/2]
g1 x[#1 - #3 - #5] y[#2 - #4 - #5]          (feed to start point bottom left)
g1 x[#1 + #3 + #5]                          (cut bottom)
g1 y[#2 + #4 + #5]                          (cut RHS)
g1 x[#1 - #3 - #5]                          (cut top)
g1 y[#2 - #4 - #5]                          (cut LHS)
o101 endsub

; *****************************************************************************
;   Main Code
; *****************************************************************************

; Preamble
G80 ; Cancel any canned cycle
G17 ; XY plane
G54 ; Coordinate System 1
G90 ; Absolute
G21 ; Millimetres
G43 ; Cancel cutter radius comp
G49 ; Cancel tool length comp

#<safe_Z> = 60
#<safe_Z_uncomp> = 100

T2 M6 (Load 6mm ball-nose tool)
g43 (tool length offet on)
g0 z[#<safe_Z>] (safe Z)
g0 x-70 y-30 (home bottom left)

f100

(roughing)
g0 z-3
g42 (compensation on)
o100 call [0] [0] [80.4] [16.4] [5]
g0 z[#<safe_Z>] (safe Z)
g40 (compensation off)
g0 x-70 y-30 (home bottom left)

(finishing)
g0 z-3
g42 (compensation on)
o100 call [0] [0] [80.0] [16.0] [5]
g0 z[#<safe_Z>] (safe Z)
g40 (compensation off)
g0 x-70 y-30 (home bottom left)

g0 x-150 (move clear  of workpiece)

g49 (length compensation off)
g0 z[#<safe_Z_uncomp>]

m2
